<ng-container *ngIf="found; else error">
    <div class="main-container grid gap-4">
        <div class="item-wrapper">
            <div class="flex-grid-container gap-4">
                <div class="grid gap-1 image-wrapper">
                    <div class="item-image">
                        <img [src]="item.imagesSrc[item.indexOfImage]">


                    </div>
                    <div *ngIf="item.color.length > 1" class="flex-center gap-2">
                        <ng-container *ngFor="let color of item.color; let indexOfElement=index">
                            <div [style]='"background:"+color' class="color-prop"
                                (click)="goToImage(indexOfElement, item)"></div>
                        </ng-container>
                    </div>
                </div>
                <div class="desc-container tui-text_h5 flex-column gap-2">
                    <!--name-->
                    <div>{{item.name}}</div>
                    <!--rating-->
                    <div class="rating-flex">
                        <ng-container *ngIf="item.rating > 0 || item.rating >= 0.2; else srcNull">
                            <tui-svg *ngIf="item.rating >= 0.2; else srcHalf" [src]="ratingSrcFull"></tui-svg>
                        </ng-container>

                        <ng-container *ngIf="item.rating > 0.2 || item.rating >= 0.4; else srcNull">
                            <tui-svg *ngIf="item.rating >= 0.4; else srcHalf" [src]="ratingSrcFull"></tui-svg>
                        </ng-container>

                        <ng-container *ngIf="item.rating > 0.4 || item.rating >= 0.6; else srcNull">
                            <tui-svg *ngIf="item.rating >= 0.6; else srcHalf" [src]="ratingSrcFull"></tui-svg>
                        </ng-container>

                        <ng-container *ngIf="item.rating > 0.6 || item.rating >= 0.8; else srcNull">
                            <tui-svg *ngIf="item.rating >= 0.8; else srcHalf" [src]="ratingSrcFull"></tui-svg>
                        </ng-container>

                        <ng-container *ngIf="item.rating > 0.8 || item.rating == 1; else srcNull">
                            <tui-svg *ngIf="item.rating == 1; else srcHalf" [src]="ratingSrcFull"></tui-svg>
                        </ng-container>

                    </div>
                    <ng-template #srcNull>
                        <tui-svg [src]="ratingSrcNull"></tui-svg>
                    </ng-template>
                    <ng-template #srcHalf>
                        <tui-svg [src]="ratingSrcHalf"></tui-svg>
                    </ng-template>
                    <!--price-->

                    <div style="align-items: end" class="flex gap-1">
                        <ng-container *ngIf="item.discount[item.indexOfColor] === 0; else discount">
                            <span>${{item.price[item.indexOfColor]}}</span>
                        </ng-container>
                        <ng-template #discount>
                            <span>${{item.actualPrice[item.indexOfColor]}}</span><span
                                class="tui-text_body-l old-price">${{item.price[item.indexOfColor]}}</span>
                            <div class="tui-text_body-l discount">SAVE {{item.discount[item.indexOfColor]}}%</div>
                        </ng-template>
                    </div>
                    <div class="border-bottom tui-space_vertical-2"></div>
                    <!--color-->
                    <div class="grid gap-1">
                        <div style="font-weight: bold" class="tui-text_body-l">Color: {{item.color[item.indexOfColor]}}</div>
                        <div class="flex gap-1">

                            <ng-container *ngFor="let color of item.color; let indexOfElement = index">
                                <div [ngClass]="{'selected-color-prop': indexOfElement == item.indexOfColor}"
                                    [style]="'background:'+color" class="color-prop-l"
                                    (click)="selectColorProperty(color, item, indexOfElement)"></div>
                            </ng-container>
                        </div>
                    </div>
                    <!--second property-->
                    <div class="grid gap-1">
                        <div style="font-weight: bold" class="tui-text_body-l">{{item.labelSecondProperty}}: {{item.secondProperty[item.indexOfSecondProperty]}}{{item.suffixOfSecProp}}</div>
                    <div class="flex gap-1">
                        <ng-container *ngFor="let secondProperty of item.secondProperty; let indexOfElement = index">
                            <div [ngClass]="{'selected-second-prop': indexOfElement == item.indexOfSecondProperty}"
                                class="tui-text_body-m second-prop"
                                (click)="selectProperty(item, indexOfElement)">{{secondProperty}}{{item.suffixOfSecProp}}</div>
                        </ng-container>
                    </div>
                    </div>
                    <div style="align-items: center" class="cart-wrapper flex gap-2">
                        <div style="align-items: center" class="flex">
                            <button tuiMode="onLight" [disabled]="disabled" class="" tuiIconButton type="button" appearance="icon"
                                icon="tuiIconMinus" (click)="changeAmount(false)"></button>

                            <span>{{amount}}</span>

                            <button tuiMode="onLight" tuiIconButton type="button" appearance="icon" icon="tuiIconPlus"
                                (click)="changeAmount(true)"></button>

                        </div>
                        <button class="button-flex" tuiButton>Add to cart</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="item-wrapper">
            <div class="tui-text_body-m">
                <p>{{item.description}}</p>
            </div>
        </div>
    </div>
</ng-container>
<ng-template #error>
    <app-page-not-found></app-page-not-found>
</ng-template>